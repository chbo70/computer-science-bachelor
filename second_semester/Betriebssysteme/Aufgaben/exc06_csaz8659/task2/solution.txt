Yes, semaphores can be used instead of mutexes.

Rest of solution is inside source file.
